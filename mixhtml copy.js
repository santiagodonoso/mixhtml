function cl(t){console.log(t)}async function mixhtml(t=!1){if(t||(t=event.target),!t.getAttribute("mix-url")){console.log("error : mix() mix-url missing");return}if(document.querySelector(`[mix-on-url="${t.getAttribute("mix-url")}"]`)){mixonurl(t.getAttribute("mix-url"));return}mix_fetch_data(t)}async function mix_fetch_data(t){if(!t.getAttribute("mix-method")){cl("error : mix_fetch_data() mix-method missing");return}if(t.setAttribute("mix-method",t.getAttribute("mix-method").toUpperCase()),!["GET","POST","PUT","PATCH","DELETE"].includes(t.getAttribute("mix-method")))return;let e=t.getAttribute("mix-url").includes("?")?`${t.getAttribute("mix-url")}&spa=yes`:`${t.getAttribute("mix-url")}?spa=yes`;if("POST"==t.getAttribute("mix-method")){if(!t.getAttribute("mix-data")){cl("error : mix_fetch_data() mix-data missing");return}if(!document.querySelector(t.getAttribute("mix-data"))){cl("error - mix-data element doesn't exist");return}}let r=null;res=await (r=["POST","PUT","PATCH"].includes(t.getAttribute("mix-method"))?await fetch(e,{method:t.getAttribute("mix-method"),body:new FormData(document.querySelector(t.getAttribute("mix-data")))}):await fetch(e,{method:t.getAttribute("mix-method")})).text(),document.querySelector("body").insertAdjacentHTML("beforeend",res),process_template(t.getAttribute("mix-url"))}function process_template(t){let e=!1;document.querySelector("template[mix-target]")&&document.querySelectorAll("template[mix-target]").forEach(r=>{if(r.getAttribute("mix-newurl")&&!1==e&&(e=r.getAttribute("mix-newurl")),!r.getAttribute("mix-target")||!document.querySelector(r.getAttribute("mix-target")))return;let i=r.getAttribute("mix-position")||"innerHTML";["innerHTML","replace","beforebegin","afterbegin","beforeend","afterend"].includes(i)&&("innerHTML"==i?document.querySelector(r.getAttribute("mix-target")).innerHTML=r.innerHTML:"replace"==i?(document.querySelector(r.getAttribute("mix-target")).insertAdjacentHTML("afterend",r.innerHTML),document.querySelector(r.getAttribute("mix-target")).remove()):document.querySelector(r.getAttribute("mix-target")).insertAdjacentHTML(i,r.innerHTML),r.getAttribute("mix-push-url"),r.remove(),mixonurl(t))})}function mixonurl(t,e=!0){document.querySelectorAll(`[mix-on-url='${t}']`).forEach(t=>{let r=t.getAttribute("mix-title")||!1;r&&(document.title=r),t.getAttribute("mix-push-url")&&e&&history.pushState({mixonurl:t.getAttribute("mix-push-url")},"",t.getAttribute("mix-push-url")),t.getAttribute("mix-hide")&&document.querySelectorAll(t.getAttribute("mix-hide")).forEach(t=>{t.classList.add("hidden")}),t.getAttribute("mix-show")&&document.querySelectorAll(t.getAttribute("mix-show")).forEach(t=>{t.classList.remove("hidden")})})}history.replaceState({mixonurl:mix_replace_url},"title",mix_replace_url),window.onpopstate=function(t){mixonurl(t.state.mixonurl,!1)},setInterval(function(){document.querySelectorAll("[mix-live-for]").forEach(t=>{0>=t.getAttribute("mix-live-for")?t.remove():t.setAttribute("mix-live-for",t.getAttribute("mix-live-for")-1)})},1e3);